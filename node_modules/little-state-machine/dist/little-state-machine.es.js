import*as e from"react";var t=function(){var e,t={},n=[],r="__LSM__";try{e="undefined"!=typeof sessionStorage?window.sessionStorage:{}}catch(t){e={}}return{updateStore:function(n){try{t=JSON.parse(e.getItem(r)||"")||n}catch(e){t=n}},saveStore:function(){e.setItem(r,JSON.stringify(t))},get middleWares(){return n},set middleWares(e){n=e},get state(){return t},set state(e){t=e},get name(){return r},set name(e){r=e},get storageType(){return e},set storageType(t){e=t}}}(),n=e.createContext(void 0),r=function(r){var o=r.children,s=e.useState(t.state);return e.createElement(n.Provider,{value:{state:s[0],setState:s[1]}},o)},o="onAction";function s(e,n){n&&(n.name&&(t.name=n.name),n.storageType&&(t.storageType=n.storageType),n.middleWares&&(t.middleWares=n.middleWares),n.persist&&(o=n.persist)),"production"!==process.env.NODE_ENV&&"undefined"!=typeof window&&(window.__LSM_NAME__=t.name,window.__LSM_RESET__=function(){return t.storageType.removeItem(t.name)}),t.updateStore(e)}function a(r){var s,a=(s=e.useContext(n),"production"!==process.env.NODE_ENV&&(s||console.error("LSM context is undefined.")),s),i=a.state,u=a.setState,c=e.useRef(Object.entries(r||{}).reduce(function(e,n){var r;return Object.assign({},e,((r={})[n[0]]=function(e,n){return function(r){"production"!==process.env.NODE_ENV&&(window.__LSM_NAME__=n.name),t.state=n(t.state,r),t.middleWares&&(t.state=t.middleWares.reduce(function(e,t){return t(e,n.name,r)||e},t.state)),e(t.state),"onAction"===o&&t.saveStore()}}(u,n[1]),r))},{}));return e.useEffect(function(){"beforeUnload"===o&&(window.onbeforeunload=function(){return t.saveStore()})},[]),{actions:c.current,state:i}}export{r as StateMachineProvider,s as createStore,a as useStateMachine};
//# sourceMappingURL=little-state-machine.es.js.map
