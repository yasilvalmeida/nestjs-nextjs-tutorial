!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e||self).littleStateMachine={},e.react)}(this,function(e,t){function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,t}var n=/*#__PURE__*/r(t),a=function(){var e,t={},r=[],n="__LSM__";try{e="undefined"!=typeof sessionStorage?window.sessionStorage:{}}catch(t){e={}}return{updateStore:function(r){try{t=JSON.parse(e.getItem(n)||"")||r}catch(e){t=r}},saveStore:function(){e.setItem(n,JSON.stringify(t))},get middleWares(){return r},set middleWares(e){r=e},get state(){return t},set state(e){t=e},get name(){return n},set name(e){n=e},get storageType(){return e},set storageType(t){e=t}}}(),o=n.createContext(void 0),s="onAction";e.StateMachineProvider=function(e){var t=e.children,r=n.useState(a.state);return n.createElement(o.Provider,{value:{state:r[0],setState:r[1]}},t)},e.createStore=function(e,t){t&&(t.name&&(a.name=t.name),t.storageType&&(a.storageType=t.storageType),t.middleWares&&(a.middleWares=t.middleWares),t.persist&&(s=t.persist)),a.updateStore(e)},e.useStateMachine=function(e){var t=n.useContext(o),r=t.state,i=t.setState,u=n.useRef(Object.entries(e||{}).reduce(function(e,t){var r;return Object.assign({},e,((r={})[t[0]]=function(e,t){return function(r){a.state=t(a.state,r),a.middleWares&&(a.state=a.middleWares.reduce(function(e,n){return n(e,t.name,r)||e},a.state)),e(a.state),"onAction"===s&&a.saveStore()}}(i,t[1]),r))},{}));return n.useEffect(function(){"beforeUnload"===s&&(window.onbeforeunload=function(){return a.saveStore()})},[]),{actions:u.current,state:r}}});
//# sourceMappingURL=little-state-machine.umd.js.map
