function e(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,t}var t=/*#__PURE__*/e(require("react")),r=function(){var e,t={},r=[],n="__LSM__";try{e="undefined"!=typeof sessionStorage?window.sessionStorage:{}}catch(t){e={}}return{updateStore:function(r){try{t=JSON.parse(e.getItem(n)||"")||r}catch(e){t=r}},saveStore:function(){e.setItem(n,JSON.stringify(t))},get middleWares(){return r},set middleWares(e){r=e},get state(){return t},set state(e){t=e},get name(){return n},set name(e){n=e},get storageType(){return e},set storageType(t){e=t}}}(),n=t.createContext(void 0),a="onAction";exports.StateMachineProvider=function(e){var a=e.children,s=t.useState(r.state);return t.createElement(n.Provider,{value:{state:s[0],setState:s[1]}},a)},exports.createStore=function(e,t){t&&(t.name&&(r.name=t.name),t.storageType&&(r.storageType=t.storageType),t.middleWares&&(r.middleWares=t.middleWares),t.persist&&(a=t.persist)),r.updateStore(e)},exports.useStateMachine=function(e){var s=t.useContext(n),o=s.state,u=s.setState,i=t.useRef(Object.entries(e||{}).reduce(function(e,t){var n;return Object.assign({},e,((n={})[t[0]]=function(e,t){return function(n){r.state=t(r.state,n),r.middleWares&&(r.state=r.middleWares.reduce(function(e,r){return r(e,t.name,n)||e},r.state)),e(r.state),"onAction"===a&&r.saveStore()}}(u,t[1]),n))},{}));return t.useEffect(function(){"beforeUnload"===a&&(window.onbeforeunload=function(){return r.saveStore()})},[]),{actions:i.current,state:o}};
//# sourceMappingURL=little-state-machine.js.map
